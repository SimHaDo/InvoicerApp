# Решение проблемы с автоматической авторизацией Apple ID

## Проблема
При каждой покупке система запрашивает ввод Apple ID вручную, хотя должна автоматически использовать уже авторизованный аккаунт.

## Быстрые решения

### 1. Для симулятора (самое важное)

1. **Откройте Settings в симуляторе**
2. **Перейдите в App Store**
3. **Войдите в свой Apple ID** (используйте sandbox аккаунт из App Store Connect)
4. **Убедитесь, что "Sign In Automatically" включен**

### 2. Настройка StoreKit в Xcode

1. **Откройте Xcode**
2. **Перейдите в Product → Scheme → Edit Scheme**
3. **Выберите Run → Options**
4. **В разделе StoreKit Configuration выберите:**
   - "Use Sandbox StoreKit" (для тестирования)

### 3. Создание StoreKit Configuration File (рекомендуется)

1. **В Xcode создайте новый файл:**
   - File → New → File
   - StoreKit → StoreKit Configuration File
   - Назовите его `Products.storekit`

2. **Добавьте ваши продукты в файл**

3. **Настройте схему:**
   - Product → Scheme → Edit Scheme
   - Run → Options
   - StoreKit Configuration: выберите `Products.storekit`

### 4. Для реального устройства

1. **Войдите в Settings → [Your Name] → Media & Purchases**
2. **Убедитесь, что вы авторизованы**
3. **Включите "Automatic Downloads"**

## Проверка

После настройки:
1. Запустите приложение
2. Попробуйте купить подписку
3. Система должна автоматически использовать авторизованный аккаунт
4. Проверьте логи в Xcode Console - должны появиться сообщения:
   - "✅ RevenueCat initialized for user: [USER_ID]"
   - "✅ Current user: [USER_ID]"

## Дополнительные советы

- **Используйте реальное устройство** для финального тестирования
- **Очистите Derived Data** если проблемы persist
- **Переустановите приложение** на симуляторе
- **Проверьте настройки в App Store Connect** для sandbox тестеров

## Логирование

В коде добавлено логирование для диагностики:
- При инициализации RevenueCat
- При проверке статуса подписки
- При покупке

Следите за логами в Xcode Console для выявления проблем.
