# RevenueCat Integration - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

## üéØ –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è RevenueCat SDK
- ‚úÖ SDK –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –≤ `InvoicerAppApp.swift` —Å –≤–∞—à–∏–º –∫–ª—é—á–æ–º `appl_JGiIBARoOJHTuWxhsyMmLdHaoMM`
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω –¥–µ–ª–µ–≥–∞—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–ø–∏—Å–∫–∏
- ‚úÖ –í–∫–ª—é—á–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∫—É–ø–æ–∫

### 2. SubscriptionManager (ObservableObject)
- ‚úÖ –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å RevenueCat API
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ entitlement "pro"
- ‚úÖ –ú–µ—Ç–æ–¥—ã: `purchase()`, `restorePurchases()`, `checkSubscriptionStatus()`
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫ RevenueCat —Å –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–∞ —Å iCloud –¥–ª—è –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç–∏
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Swift Concurrency (async/await)

### 3. –ö–∞—Å—Ç–æ–º–Ω—ã–π Paywall UI
- ‚úÖ –¢—Ä–∏ –ø–ª–∞–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∏: Weekly ($rc_weekly), Monthly ($rc_monthly), Annual ($rc_annual)
- ‚úÖ –õ–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ü–µ–Ω—ã —á–µ—Ä–µ–∑ StoreProduct –æ—Ç RevenueCat
- ‚úÖ –ë–µ–π–¥–∂ "3-day free" –Ω–∞ Weekly –ø–ª–∞–Ω–µ
- ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –ø–ª–∞–Ω–∞–º–∏ —Å –∞–Ω–∏–º–∞—Ü–∏—è–º–∏
- ‚úÖ –ö–Ω–æ–ø–∫–∏ "Continue" (–ø–æ–∫—É–ø–∫–∞) –∏ "Restore"
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ paywall RevenueCat

### 4. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `PremiumFeatureView` –¥–ª—è —É—Å–ª–æ–≤–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `PremiumContentBlocker` –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø—Ä–µ–º–∏—É–º-—Ñ—É–Ω–∫—Ü–∏–π
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `PremiumBadge` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ Pro
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —ç–∫—Ä–∞–Ω —Å—á–µ—Ç–æ–≤ (InvoicesScreen)

### 5. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ MVVM –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- ‚úÖ SubscriptionManager –ø–æ–¥–∫–ª—é—á–µ–Ω —á–µ—Ä–µ–∑ `.environmentObject()` –≥–ª–æ–±–∞–ª—å–Ω–æ
- ‚úÖ –ß–∏—Å—Ç—ã–π –∫–æ–¥ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Swift Concurrency

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å Sandbox –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Sandbox —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

1. **–í Xcode:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç
   - –í—ã–±–µ—Ä–∏—Ç–µ —Å—Ö–µ–º—É "InvoicerApp"
   - –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Å—Ö–µ–º—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ "Build Configuration" –≤ "Debug"

2. **–í App Store Connect:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏ –∞–∫—Ç–∏–≤–Ω—ã
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Product IDs —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç:
     - `weekly_premium` ‚Üí `$rc_weekly`
     - `monthly_premium` ‚Üí `$rc_monthly` 
     - `annual_premium` ‚Üí `$rc_annual`

3. **–ù–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ:**
   - –í–æ–π–¥–∏—Ç–µ –≤ Settings ‚Üí App Store ‚Üí Sandbox Account
   - –î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π Apple ID –¥–ª—è sandbox
   - –í—ã–π–¥–∏—Ç–µ –∏–∑ –æ–±—ã—á–Ω–æ–≥–æ Apple ID –≤ App Store

### –°—Ü–µ–Ω–∞—Ä–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

#### ‚úÖ –¢–µ—Å—Ç 1: –ü–æ–∫—É–ø–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –ü—Ä–æ–π–¥–∏—Ç–µ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ –¥–æ paywall —ç–∫—Ä–∞–Ω–∞
3. –í—ã–±–µ—Ä–∏—Ç–µ –ª—é–±–æ–π –ø–ª–∞–Ω –ø–æ–¥–ø–∏—Å–∫–∏
4. –ù–∞–∂–º–∏—Ç–µ "Start with Pro"
5. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–æ–∫—É–ø–∫—É –≤ sandbox
6. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –°—Ç–∞—Ç—É—Å `isPro` —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è `true`, paywall –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è

#### ‚úÖ –¢–µ—Å—Ç 2: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∫—É–ø–æ–∫
1. –ù–∞ —ç–∫—Ä–∞–Ω–µ paywall –Ω–∞–∂–º–∏—Ç–µ "Restore Purchases"
2. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ï—Å–ª–∏ –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞, —Å—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–∏—Ç—Å—è

#### ‚úÖ –¢–µ—Å—Ç 3: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
1. –ë–µ–∑ –ø–æ–¥–ø–∏—Å–∫–∏: –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–∑–¥–∞—Ç—å —Å—á–µ—Ç
2. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è paywall
3. –° –ø–æ–¥–ø–∏—Å–∫–æ–π: –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–∑–¥–∞—Ç—å —Å—á–µ—Ç
4. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å–æ–∑–¥–∞–Ω–∏–µ —Å—á–µ—Ç–∞

#### ‚úÖ –¢–µ—Å—Ç 4: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
1. –ö—É–ø–∏—Ç–µ –ø–æ–¥–ø–∏—Å–∫—É –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
2. –ó–∞–∫—Ä–æ–π—Ç–µ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –°—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

#### ‚úÖ –¢–µ—Å—Ç 5: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
1. –û—Ç–∫–ª—é—á–∏—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∫—É–ø–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
3. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ —Å–µ—Ç–∏

### –û—Ç–ª–∞–¥–∫–∞

#### –õ–æ–≥–∏ RevenueCat
–í –∫–æ–¥–µ –≤–∫–ª—é—á–µ–Ω debug —Ä–µ–∂–∏–º:
```swift
Purchases.logLevel = .debug
```

–õ–æ–≥–∏ –±—É–¥—É—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å:
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é SDK
- –ó–∞–≥—Ä—É–∑–∫—É –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
- –°—Ç–∞—Ç—É—Å –ø–æ–∫—É–ø–æ–∫
- –û—à–∏–±–∫–∏

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–ø–∏—Å–∫–∏
–í `SubscriptionManager` –¥–æ–±–∞–≤–ª–µ–Ω—ã –ª–æ–≥–∏:
```swift
print("‚úÖ Subscription status updated: isPro = \(isPro)")
```

### –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

#### –ü—Ä–æ–±–ª–µ–º–∞: "No offerings available"
**–†–µ—à–µ–Ω–∏–µ:** 
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ RevenueCat Dashboard –Ω–∞—Å—Ç—Ä–æ–µ–Ω offering "default"
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–∞–∫–µ—Ç—ã –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ offering

#### –ü—Ä–æ–±–ª–µ–º–∞: "Product not available"
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Product IDs –≤ App Store Connect
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–¥–ø–∏—Å–∫–∏ –∞–∫—Ç–∏–≤–Ω—ã –∏ –æ–¥–æ–±—Ä–µ–Ω—ã

#### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ–∫—É–ø–∫–∞ –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ sandbox –∞–∫–∫–∞—É–Ω—Ç
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã—à–ª–∏ –∏–∑ –æ–±—ã—á–Ω–æ–≥–æ Apple ID
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

## üì± –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö –æ—à–∏–±–æ–∫
- ‚úÖ –õ–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π UI
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å iCloud
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∫—É–ø–æ–∫
- ‚úÖ –†–µ–∞–ª—Ç–∞–π–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:
1. –ò–∑–º–µ–Ω–∏—Ç–µ `Purchases.logLevel = .debug` –Ω–∞ `.error`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –ø–æ–¥–ø–∏—Å–∫–∏ –∞–∫—Ç–∏–≤–Ω—ã –≤ App Store Connect
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ RevenueCat Dashboard –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –º–µ—Ç—Ä–∏–∫
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–æ–±—ã—Ç–∏—è—Ö –ø–æ–¥–ø–∏—Å–æ–∫
- –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –∫–æ–Ω–≤–µ—Ä—Å–∏—é paywall

---

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞! üéâ**

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤–º–µ—Å—Ç–µ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –ø–æ–¥–ø–∏—Å–æ–∫ —á–µ—Ä–µ–∑ RevenueCat.

